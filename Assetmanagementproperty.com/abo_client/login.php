<?php  include_once ("config.php"); $error = loadAllCfg(); if (!@$cfgCustom["loginType"] || @$cfgCustom["loginType"] == "No Password") { $_SESSION['user'] = "No Password"; header("Location: index.php"); exit; } setcookie("user", "", time() - 1); session_set_cookie_params(31000000, "/"); session_start(); if (!tryConnect()) { die("Impossible to connect to DB"); } $login = @$_POST["login"]; $password = @$_POST["password"]; $remember = @$_POST["remember"]; $fromTableIsOk = false; if ($cfgCustom["loginType"] == "From Table") { $t = explode('/', $cfgCustom["tableLoginPwd"]); if ($cfgCustom['passwordEncryption'] == 'No Encryption / Plain Text') { $sql = "SELECT {$t[1]} FROM {$t[0]} WHERE {$t[1]}='$login' AND {$t[2]}='$password'"; } else { if ($cfgCustom['passwordEncryption'] == 'SHA-512') { $password = hash('sha512', $password); $sql = "SELECT {$t[1]} FROM {$t[0]} WHERE {$t[1]}='$login' AND {$t[2]}='$password'"; } else { $password = ''; } } $login = @zbSQL($sql); if ($login) $fromTableIsOk = true; } if ($fromTableIsOk || ($login && ($login == $cfgCustom["login"] && $password == $cfgCustom["password"])) ) { if ($fromTableIsOk) $_SESSION['user'] = $login; else $_SESSION['user'] = $cfgCustom["login"]; header("Location: index.php"); die(); } ?><!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title><?php echo $cfgCustom["websiteTitle"] ?> | Log in</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"><link rel="stylesheet" href="plugins/icheck-bootstrap/icheck-bootstrap.min.css"><link rel="stylesheet" href="dist/css/adminlte.min.css"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet"></head><body class="hold-transition login-page" style="background-color: white"><div class="login-box"><div class="login-logo"><img width=100% src='<?php echo $cfgCustom["logoLogin"] ?>'><br></div><div class="card"><div class="card-body login-card-body"><p class="login-box-msg">Welcome</p><form action="login.php" method="post"><div class="input-group mb-3"><input name="login" type="text" class="form-control" placeholder="Login"><div class="input-group-append"><div class="input-group-text"><span class="fas fa-user"></span></div></div></div><div class="input-group mb-3"><input name="password" type="password" class="form-control" placeholder="Password"><div class="input-group-append"><div class="input-group-text"><span class="fas fa-lock"></span></div></div></div><div class="row"><div class="col-8"><div class="icheck-primary"></div></div><div class="col-4"><button type="submit" class="btn btn-primary btn-block">Enter</button></div></div></form></div></div></div><script src="plugins/jquery/jquery.min.js"></script><script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script><script src="dist/js/adminlte.min.js"></script></body></html>

