<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Property Details | Asset Management Property</title>
  <meta name="description" content="View property details and contact us for more information">

  <!-- Open Graph -->
  <meta property="og:title" content="Property Details | Asset Management Property">
  <meta property="og:description" content="View property details and contact us for more information">
  <meta property="og:image" content="https://via.placeholder.com/1200x630/1744BE/FFFFFF?text=AMP+Pattaya">
  <meta property="og:url" content="https://amppattaya.com/detail.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Asset Management Property">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Property Details | Asset Management Property">
  <meta name="twitter:description" content="View property details and contact us for more information">
  <meta name="twitter:image" content="https://via.placeholder.com/1200x630/1744BE/FFFFFF?text=AMP+Pattaya">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://amppattaya.com/detail.html">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg">
  <link rel="apple-touch-icon" href="assets/images/favicon.svg">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <link rel="stylesheet" href="assets/css/responsive.css">

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
  <!-- Skip Link for Accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <a href="index.html" class="logo">
        <img src="assets/images/logo-amp.svg" alt="AMP Logo" height="40">
      </a>

      <nav class="nav desktop-only">
        <a href="index.html" data-i18n="nav_home"><i data-lucide="home"></i> Home</a>
        <a href="listing.html?intent=rent" data-i18n="nav_rent"><i data-lucide="key"></i> Rent</a>
        <a href="listing.html?intent=sale" data-i18n="nav_buy"><i data-lucide="building"></i> Buy</a>
        <a href="projects/index.html" data-i18n="nav_projects"><i data-lucide="layers"></i> Projects</a>
        <a href="invest/index.html" data-i18n="nav_invest"><i data-lucide="trending-up"></i> Invest</a>
        <a href="about.html" data-i18n="nav_about"><i data-lucide="info"></i> About</a>
        <a href="contact.html" data-i18n="nav_contact"><i data-lucide="mail"></i> Contact</a>
      </nav>

      <div class="header-actions">
        <button class="lang-switch" onclick="toggleLanguage()">
          <span id="lang-text">EN</span>
        </button>
        <button class="hamburger mobile-only" onclick="toggleMobileMenu()" aria-label="Menu" aria-expanded="false">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobile-menu">
    <a href="index.html" data-i18n="nav_home"><i data-lucide="home"></i> Home</a>
    <a href="listing.html?intent=rent" data-i18n="nav_rent"><i data-lucide="key"></i> Rent</a>
    <a href="listing.html?intent=sale" data-i18n="nav_buy"><i data-lucide="building"></i> Buy</a>
    <a href="projects/index.html" data-i18n="nav_projects"><i data-lucide="layers"></i> Projects</a>
    <a href="invest/index.html" data-i18n="nav_invest"><i data-lucide="trending-up"></i> Invest</a>
    <a href="about.html" data-i18n="nav_about"><i data-lucide="info"></i> About</a>
    <a href="contact.html" data-i18n="nav_contact"><i data-lucide="mail"></i> Contact</a>
  </div>

  <!-- Main Content -->
  <div class="section" id="main-content">
    <div class="container">
      <div class="detail-layout">
        <!-- Main Content -->
        <div class="detail-main">
          <!-- Gallery -->
          <div id="gallery-section">
            <div class="gallery-main" id="gallery-main-container">
              <img id="gallery-main-image" src="" alt="Property">
              <div class="gallery-counter" id="gallery-counter">1 / 12</div>
            </div>
            <div class="gallery-thumbnails" id="gallery-thumbnails">
              <!-- Thumbnails will be rendered here -->
            </div>
          </div>

          <!-- Property Header -->
          <div class="property-header">
            <div class="property-title">
              <h1 id="property-title">Loading...</h1>
              <p class="property-location" id="property-location"><i data-lucide="map-pin"></i> <span>Loading...</span>
              </p>
            </div>
            <div class="property-price" id="property-price">฿0</div>
          </div>

          <!-- Property Facts -->
          <div class="property-facts" id="property-facts">
            <!-- Facts will be rendered here -->
          </div>

          <!-- Badges -->
          <div class="property-badges mb-lg" id="property-badges">
            <!-- Badges will be rendered here -->
          </div>

          <!-- Description -->
          <div style="background: var(--color-white); padding: 24px; border-radius: 12px; margin-bottom: 24px;">
            <h2 class="mb-md" data-i18n="detail_description">Description</h2>
            <div id="property-description">
              <p>Loading...</p>
            </div>
          </div>

          <!-- Amenities -->
          <div style="background: var(--color-white); padding: 24px; border-radius: 12px; margin-bottom: 24px;">
            <h2 class="mb-md" data-i18n="detail_amenities">Amenities</h2>
            <div class="amenities-grid" id="amenities-grid">
              <!-- Amenities will be rendered here -->
            </div>
          </div>

          <!-- Location -->
          <div style="background: var(--color-white); padding: 24px; border-radius: 12px; margin-bottom: 24px;">
            <h2 class="mb-md" data-i18n="detail_location">Location</h2>
            <div
              style="background: var(--color-gray-100); height: 300px; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
              <p style="color: var(--color-gray-600);" data-i18n="detail_mapPlaceholder">Map Placeholder</p>
            </div>
            <p id="location-description" style="color: var(--color-gray-600);">Loading...</p>
          </div>

          <!-- Similar Properties -->
          <div>
            <h2 class="mb-lg" data-i18n="detail_similarProperties">Similar Properties</h2>
            <div class="grid grid-2" id="similar-properties">
              <!-- Similar properties will be rendered here -->
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <aside class="detail-sidebar">
          <!-- Agent Card -->
          <div class="agent-card">
            <div class="agent-header">
              <svg class="agent-avatar" width="64" height="64" viewBox="0 0 64 64" style="border-radius: 50%;">
                <rect width="64" height="64" fill="#1744BE" />
                <text x="32" y="42" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="20"
                  font-weight="bold">AMP</text>
              </svg>
              <div class="agent-info">
                <h3 data-i18n="agent_name">AMP Pattaya</h3>
                <p data-i18n="agent_title">Professional Property Management</p>
              </div>
            </div>
            <div class="agent-actions">
              <a href="https://line.me/ti/p/~@554dksqb" class="btn btn-primary btn-block">
                <i data-lucide="message-circle"></i> <span data-i18n="agent_lineChat">LINE Chat</span>
              </a>
              <a href="tel:+66634533526" class="btn btn-secondary btn-block">
                <i data-lucide="phone-call"></i> <span data-i18n="agent_call">Call: 063-453-3526</span>
              </a>
            </div>
          </div>

          <!-- Inquiry Form -->
          <form class="inquiry-form" style="margin-top: 24px;" data-integration="true" data-source="Property_Inquiry">
            <h3 data-i18n="form_interestedTitle">สนใจทรัพย์นี้?</h3>
            <p style="color: var(--color-gray-600); margin-bottom: 24px; font-size: 14px;"
              data-i18n="form_interestedSubtitle">
              Interested in this property?
            </p>
            <div class="form-group">
              <input type="text" name="name" class="form-input" data-i18n-placeholder="form_name"
                placeholder="Your Name" required>
            </div>
            <div class="form-group">
              <input type="tel" name="phone" class="form-input" data-i18n-placeholder="form_phone"
                placeholder="Phone Number" required>
            </div>
            <div class="form-group">
              <textarea name="message" class="form-textarea" data-i18n-placeholder="form_message"
                placeholder="Message (optional)"></textarea>
            </div>
            <button type="submit" class="btn btn-accent btn-block" data-i18n="form_submit">Send Inquiry</button>
          </form>
        </aside>
      </div>
    </div>
  </div>

  <!-- Sticky CTA (Mobile) -->
  <div class="sticky-cta">
    <a href="https://line.me/ti/p/~@554dksqb" class="btn btn-primary">
      <i data-lucide="message-circle"></i> <span data-i18n="cta_line">LINE</span>
    </a>
    <a href="tel:+66634533526" class="btn btn-accent">
      <i data-lucide="phone-call"></i> <span data-i18n="cta_call">Call</span>
    </a>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div>
          <h3 data-i18n="footer_companyName">Asset Management Property</h3>
          <p data-i18n="footer_tagline">Professional property management in Pattaya</p>
          <p style="margin-top: 16px;">
            <strong data-i18n="footer_officeHours">Office Hours:</strong><br>
            <span data-i18n="footer_hours">Mon - Sun: 9:00 AM - 6:00 PM</span>
          </p>
        </div>

        <div>
          <h3 data-i18n="footer_contactUs">Contact Us</h3>
          <a href="tel:+66634533526"><i data-lucide="phone"></i> +66 63-453-3526</a>
          <a href="mailto:info@amppattaya.com"><i data-lucide="mail"></i> info@amppattaya.com</a>
          <a href="https://line.me/ti/p/~@554dksqb"><i data-lucide="message-circle"></i> LINE: @554dksqb</a>
        </div>

        <div>
          <h3 data-i18n="footer_quickLinks">Quick Links</h3>
          <a href="listing.html?intent=rent" data-i18n="footer_forRent">Properties for Rent</a>
          <a href="listing.html?intent=sale" data-i18n="footer_forSale">Properties for Sale</a>
          <a href="projects/index.html" data-i18n="nav_projects">Projects</a>
          <a href="invest/index.html" data-i18n="nav_invest_hub">Investment Hub</a>
          <a href="about.html" data-i18n="footer_about_us">About Us</a>
          <a href="contact.html" data-i18n="footer_contact">Contact Us</a>
        </div>
      </div>

      <div class="footer-bottom">
        <p data-i18n="footer_copyright">&copy; 2026 Asset Management Property. All rights reserved. | Demo Website</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="assets/js/mock-data.js"></script>
  <script src="assets/js/gallery.js"></script>
  <script src="assets/js/i18n.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="assets/js/lead-integration.js"></script>

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json" id="schema-jsonld">
  </script>

  <script>
    // Get property ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const propertyId = urlParams.get('id');

    // Find property
    const property = ALL_PROPERTIES.find(p => p.id === propertyId);

    if (!property) {
      // Redirect to listing if property not found
      window.location.href = 'listing.html';
    } else {
      // Render property details
      const currentLang = document.documentElement.lang || 'en';
      const title = currentLang === 'th' ? property.title_th : property.title_en;
      const priceLabel = property.intent === 'rent' ? '/month' : '';

      // Title and price
      document.getElementById('property-title').textContent = title;
      document.getElementById('property-location').innerHTML = `<i data-lucide="map-pin"></i> ${property.area}, Pattaya`;
      document.getElementById('property-price').innerHTML = `฿${property.price.toLocaleString()}<span>${priceLabel}</span>`;
      document.title = `${title} | Asset Management Property`;

      // Facts
      const factsHTML = `
        ${property.beds !== null ? `<div class="fact"><i data-lucide="bed-double"></i> <strong>${property.beds === 0 ? 'Studio' : property.beds}</strong> ${property.beds === 1 ? 'Bedroom' : 'Bedrooms'}</div>` : ''}
        ${property.baths !== null ? `<div class="fact"><i data-lucide="bath"></i> <strong>${property.baths}</strong> ${property.baths === 1 ? 'Bathroom' : 'Bathrooms'}</div>` : ''}
        <div class="fact"><i data-lucide="square"></i> <strong>${property.sqm}</strong> m²</div>
        <div class="fact"><i data-lucide="calendar"></i> Available: <strong>${new Date(property.available_date).toLocaleDateString()}</strong></div>
      `;
      document.getElementById('property-facts').innerHTML = factsHTML;

      // Badges
      let badgesHTML = property.badges.map(badge => {
        const badgeClass = badge === 'Featured' ? 'badge-featured' :
          badge === 'Available Now' ? 'badge-available' : 'badge-updated';
        return `<span class="badge ${badgeClass}">${badge}</span>`;
      }).join('');
      badgesHTML += `<span class="badge badge-updated">Updated ${new Date(property.updated).toLocaleDateString()}</span>`;
      document.getElementById('property-badges').innerHTML = badgesHTML;

      // Description
      function updateDescription() {
        const currentLang = document.documentElement.lang || 'en';
        const description = currentLang === 'th' ? property.description_th : property.description_en;
        document.getElementById('property-description').innerHTML = `<p>${description}</p>`;
      }

      updateDescription();

      // Listen for language changes (custom event from i18n.js would be ideal, 
      // but for now we'll hook into the global updatePageText if possible, 
      // or rely on a MutationObserver on the html lang attribute)
      const observer = new MutationObserver(function (mutations) {
        mutations.forEach(function (mutation) {
          if (mutation.type === "attributes" && mutation.attributeName === "lang") {
            updateDescription();

            // Also update other dynamic elements
            const currentLang = document.documentElement.lang || 'en';
            document.getElementById('property-title').textContent = currentLang === 'th' ? property.title_th : property.title_en;

            // Re-render similar properties to update their titles
            const similarHTML = similarProperties.map(p => {
              const title = currentLang === 'th' ? p.title_th : p.title_en;
              const priceLabel = p.intent === 'rent' ? (currentLang === 'th' ? '/เดือน' : '/month') : '';
              const bedsLabel = p.beds === 0 ? 'Studio' : `${p.beds} ${p.beds === 1 ? (currentLang === 'th' ? 'ห้องนอน' : 'Bed') : (currentLang === 'th' ? 'ห้องนอน' : 'Beds')}`;
              const bathsLabel = `${p.baths} ${p.baths === 1 ? (currentLang === 'th' ? 'ห้องน้ำ' : 'Bath') : (currentLang === 'th' ? 'ห้องน้ำ' : 'Baths')}`;

              return `
                <div class="property-card">
                  <div class="card-image">
                    <img src="${p.image}" alt="${title}">
                  </div>
                  <div class="card-content">
                    <div class="card-price">฿${p.price.toLocaleString()}<span>${priceLabel}</span></div>
                    <h3 class="card-title">${title}</h3>
                    <div class="card-facts">
                      ${p.beds !== null ? `<span><i data-lucide="bed-double"></i> ${bedsLabel}</span>` : ''}
                      ${p.baths !== null ? `<span><i data-lucide="bath"></i> ${bathsLabel}</span>` : ''}
                      <span><i data-lucide="square"></i> ${p.sqm} m²</span>
                    </div>
                    <div class="card-location"><i data-lucide="map-pin"></i> ${p.area}</div>
                    <div class="card-actions">
                      <a href="detail.html?id=${p.id}" class="btn btn-primary btn-sm" data-i18n="prop_view_detail">View Details</a>
                    </div>
                  </div>
                </div>
              `;
            }).join('');
            document.getElementById('similar-properties').innerHTML = similarHTML;
            updatePageText(); // Ensure static keys are updated
            if (typeof lucide !== 'undefined') lucide.createIcons();
          }
        });
      });

      observer.observe(document.documentElement, {
        attributes: true //configure it to listen to attribute changes
      });

      // Amenities
      const amenitiesIcons = {
        'Pool': 'waves',
        'Gym': 'dumbbell',
        'Parking': 'car',
        '24/7 Security': 'shield-check',
        'Elevator': 'move-vertical',
        'WiFi': 'wifi',
        'Cable TV': 'tv',
        'Air Conditioning': 'wind',
        'Garden': 'trees',
        'Private Pool': 'waves',
        'Sala': 'home',
        'Security System': 'shield',
        'Maid Service': 'sparkles',
        'Home Theater': 'film',
        'Playground': 'circle-play',
        'Sea View': 'waves',
        'Road Access': 'route',
        'Electricity Available': 'zap',
        'Water Supply': 'droplets'
      };

      const amenitiesHTML = property.amenities.map(amenity => {
        const icon = amenitiesIcons[amenity] || 'check';
        return `
          <div class="amenity-item">
            <div class="amenity-icon"><i data-lucide="${icon}"></i></div>
            <div class="amenity-label">${amenity}</div>
          </div>
        `;
      }).join('');
      document.getElementById('amenities-grid').innerHTML = amenitiesHTML;

      // Location description
      document.getElementById('location-description').textContent = `Located in ${property.area}, one of Pattaya's most sought-after areas. Easy access to beaches, shopping, restaurants, and entertainment.`;

      // Gallery
      const mainImage = document.getElementById('gallery-main-image');
      mainImage.src = property.images[0];

      const thumbnailsHTML = property.images.slice(0, 6).map((img, index) => `
        <div class="gallery-thumbnail ${index === 0 ? 'active' : ''}">
          <img src="${img}" alt="Property image ${index + 1}" data-large="${img}">
        </div>
      `).join('');
      document.getElementById('gallery-thumbnails').innerHTML = thumbnailsHTML;

      // Initialize gallery
      gallery = new Gallery(property.images);

      // Similar properties (same area or same type)
      const similarProperties = ALL_PROPERTIES
        .filter(p => p.id !== property.id && (p.area === property.area || p.type === property.type))
        .slice(0, 4);

      const similarHTML = similarProperties.map(p => {
        const title = currentLang === 'th' ? p.title_th : p.title_en;
        const priceLabel = p.intent === 'rent' ? '/month' : '';
        const bedsLabel = p.beds === 0 ? 'Studio' : `${p.beds} ${p.beds === 1 ? 'Bed' : 'Beds'}`;
        const bathsLabel = `${p.baths} ${p.baths === 1 ? 'Bath' : 'Baths'}`;

        return `
          <div class="property-card">
            <div class="card-image">
              <img src="${p.image}" alt="${title}">
            </div>
            <div class="card-content">
              <div class="card-price">฿${p.price.toLocaleString()}<span>${priceLabel}</span></div>
              <h3 class="card-title">${title}</h3>
              <div class="card-facts">
                ${p.beds !== null ? `<span><i data-lucide="bed-double"></i> ${bedsLabel}</span>` : ''}
                ${p.baths !== null ? `<span><i data-lucide="bath"></i> ${bathsLabel}</span>` : ''}
                <span><i data-lucide="square"></i> ${p.sqm} m²</span>
              </div>
              <div class="card-location"><i data-lucide="map-pin"></i> ${p.area}</div>
              <div class="card-actions">
                <a href="detail.html?id=${p.id}" class="btn btn-primary btn-sm">View Details</a>
              </div>
            </div>
          </div>
        `;
      }).join('');
      document.getElementById('similar-properties').innerHTML = similarHTML;

      // Generate JSON-LD structured data
      const jsonLd = {
        "@context": "https://schema.org",
        "@type": "RealEstateListing",
        "name": title,
        "description": property.description_en,
        "offers": {
          "@type": "Offer",
          "price": property.price,
          "priceCurrency": "THB"
        },
        "address": {
          "@type": "PostalAddress",
          "addressRegion": property.area,
          "addressCountry": "TH"
        },
        "floorSize": {
          "@type": "QuantitativeValue",
          "value": property.sqm,
          "unitCode": "MTK"
        },
        "numberOfRooms": property.beds,
        "image": property.images[0],
        "dateModified": property.updated
      };

      document.getElementById('schema-jsonld').textContent = JSON.stringify(jsonLd, null, 2);

      // Initialize Lucide icons
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }
    }
  </script>

  <!-- Initialize Lucide Icons -->
  <script>
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  </script>
</body>

</html>