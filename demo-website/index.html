<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asset Management Property | Find Properties in Pattaya</title>
  <meta name="description"
    content="Professional property management in Pattaya. Find condos, houses, and villas for rent or sale.">

  <!-- Open Graph -->
  <meta property="og:title" content="Asset Management Property | Find Properties in Pattaya">
  <meta property="og:description"
    content="Professional property management in Pattaya. Find condos, houses, and villas for rent or sale.">
  <meta property="og:image" content="https://via.placeholder.com/1200x630/1744BE/FFFFFF?text=AMP+Pattaya">
  <meta property="og:url" content="https://amppattaya.com/">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Asset Management Property">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Asset Management Property | Find Properties in Pattaya">
  <meta name="twitter:description"
    content="Professional property management in Pattaya. Find condos, houses, and villas for rent or sale.">
  <meta name="twitter:image" content="https://via.placeholder.com/1200x630/1744BE/FFFFFF?text=AMP+Pattaya">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://amppattaya.com/">

  <!-- Favicon -->
  <link rel="icon" href="assets/images/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="assets/images/logo-amp.svg">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <link rel="stylesheet" href="assets/css/marketing.css">
  <link rel="stylesheet" href="assets/css/responsive.css">

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
</head>

<body>
  <!-- Skip Link for Accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <a href="index.html" class="logo">
        <img src="assets/images/logo-amp.svg" alt="Asset Management Property" height="40">
      </a>

      <nav class="nav desktop-only">
        <a href="index.html" data-i18n="nav_home"><i data-lucide="home"></i> Home</a>
        <a href="listing.html?intent=rent" data-i18n="nav_rent"><i data-lucide="key"></i> Rent</a>
        <a href="listing.html?intent=sale" data-i18n="nav_buy"><i data-lucide="building"></i> Buy</a>
        <a href="projects/index.html" data-i18n="nav_projects"><i data-lucide="layers"></i> Projects</a>
        <a href="invest/index.html" data-i18n="nav_invest"><i data-lucide="trending-up"></i> Invest</a>
        <a href="about.html" data-i18n="nav_about"><i data-lucide="info"></i> About</a>
        <a href="contact.html" data-i18n="nav_contact"><i data-lucide="mail"></i> Contact</a>
      </nav>

      <div class="header-actions">
        <button class="lang-switch" onclick="toggleLanguage()">
          <span id="lang-text">EN</span>
        </button>
        <button class="hamburger mobile-only" onclick="toggleMobileMenu()" aria-label="Menu" aria-expanded="false">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobile-menu">
    <a href="index.html" data-i18n="nav_home"><i data-lucide="home"></i> Home</a>
    <a href="listing.html?intent=rent" data-i18n="nav_rent"><i data-lucide="key"></i> Rent</a>
    <a href="listing.html?intent=sale" data-i18n="nav_buy"><i data-lucide="building"></i> Buy</a>
    <a href="projects/index.html" data-i18n="nav_projects"><i data-lucide="layers"></i> Projects</a>
    <a href="invest/index.html" data-i18n="nav_invest"><i data-lucide="trending-up"></i> Invest</a>
    <a href="about.html" data-i18n="nav_about"><i data-lucide="info"></i> About</a>
    <a href="contact.html" data-i18n="nav_contact"><i data-lucide="mail"></i> Contact</a>
  </div>

  <!-- Hero Section -->
  <section class="hero" id="main-content">
    <div class="container">
      <h1 data-i18n="hero_title">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡πÉ‡∏ô‡∏û‡∏±‡∏ó‡∏¢‡∏≤</h1>
      <p class="hero-subtitle" data-i18n="hero_subtitle">Find Properties in Pattaya</p>

      <!-- Search Form -->
      <form class="search-form" id="search-form">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" data-i18n="search_looking_to">Looking to</label>
            <div class="toggle-group">
              <button type="button" class="toggle-option active" data-value="rent"
                data-i18n="search_intent_rent">Rent</button>
              <button type="button" class="toggle-option" data-value="sale" data-i18n="search_intent_buy">Buy</button>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" data-i18n="search_property_type">Property Type</label>
            <select name="type" class="form-select">
              <option value="" data-i18n="search_all_types">All Types</option>
              <option value="condo">Condo</option>
              <option value="house">House</option>
              <option value="villa">Villa</option>
              <option value="townhome">Townhome</option>
              <option value="land">Land</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label" data-i18n="search_area">Area</label>
            <select name="area" class="form-select">
              <option value="" data-i18n="search_all_areas">All Areas</option>
              <option value="Pattaya">Pattaya</option>
              <option value="Jomtien">Jomtien</option>
              <option value="Na Jomtien">Na Jomtien</option>
              <option value="Bang Saray">Bang Saray</option>
              <option value="Pratumnak">Pratumnak</option>
              <option value="Huay Yai">Huay Yai</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">&nbsp;</label>
            <button type="submit" class="btn btn-accent btn-block" data-i18n="search_button">Search Properties</button>
          </div>
        </div>
      </form>
    </div>
  </section>

  <!-- Featured Properties Section -->
  <section class="section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title" data-i18n="section_featured">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏û‡∏¥‡πÄ‡∏®‡∏© / Featured Properties</h2>
        <p class="section-subtitle">Handpicked properties for you</p>
      </div>

      <div class="grid grid-3" id="featured-properties" aria-busy="true" aria-label="Loading featured properties">
        <!-- Skeleton placeholders -->
        <div class="property-card skeleton-card skeleton"></div>
        <div class="property-card skeleton-card skeleton"></div>
        <div class="property-card skeleton-card skeleton"></div>
      </div>

      <div style="text-align: center; margin-top: 32px;">
        <a href="listing.html" class="btn btn-primary">View All Properties</a>
      </div>
    </div>
  </section>

  <!-- Popular Areas Section -->
  <section class="section" style="background: var(--color-white);">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title" data-i18n="section_popular_areas">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° / Popular Areas</h2>
        <p class="section-subtitle">Explore properties by location</p>
      </div>

      <div class="grid grid-3" id="popular-areas" aria-busy="true" aria-label="Loading popular areas">
        <!-- Skeleton placeholders -->
        <div class="area-card skeleton-area skeleton"></div>
        <div class="area-card skeleton-area skeleton"></div>
        <div class="area-card skeleton-area skeleton"></div>
      </div>
    </div>
  </section>

  <!-- Trust Signals Section -->
  <section class="trust-signals-section">
    <div class="container">
      <h2 class="section-title" data-i18n="trust_why_amp">‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å AMP</h2>
      <p class="section-subtitle">Your Trusted Property Partner in Pattaya</p>

      <div class="trust-signals-grid">
        <div class="trust-signal-card">
          <div class="trust-signal-icon" role="img" aria-label="Trophy icon">üèÜ</div>
          <div class="trust-signal-value">10+</div>
          <div class="trust-signal-label" data-i18n="trust_experience">Years Experience</div>
        </div>
        <div class="trust-signal-card">
          <div class="trust-signal-icon" role="img" aria-label="House icon">üè†</div>
          <div class="trust-signal-value">500+</div>
          <div class="trust-signal-label" data-i18n="trust_properties_sold">Properties Sold</div>
        </div>
        <div class="trust-signal-card">
          <div class="trust-signal-icon" role="img" aria-label="Globe icon">üåç</div>
          <div class="trust-signal-value">4</div>
          <div class="trust-signal-label" data-i18n="trust_languages">Languages: TH/EN/RU/CN</div>
        </div>
        <div class="trust-signal-card">
          <div class="trust-signal-icon" role="img" aria-label="Star icon">‚≠ê</div>
          <div class="trust-signal-value">4.9</div>
          <div class="trust-signal-label" data-i18n="trust_google_rating">Google Rating (450 reviews)</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Investment Highlights Section -->
  <section class="investment-highlights">
    <div class="container">
      <h2>Investment Opportunities in Pattaya</h2>
      <div class="highlights-grid">
        <div class="highlight-item">
          <div class="highlight-value">6.5%</div>
          <div class="highlight-label">Average Rental Yield</div>
        </div>
        <div class="highlight-item">
          <div class="highlight-value">8.1%</div>
          <div class="highlight-label">Price Growth YoY</div>
        </div>
        <div class="highlight-item">
          <div class="highlight-value">78%</div>
          <div class="highlight-label">Average Occupancy</div>
        </div>
        <div class="highlight-item">
          <div class="highlight-value">‡∏ø85K</div>
          <div class="highlight-label">Avg Price/sqm</div>
        </div>
      </div>
      <div style="text-align: center; margin-top: 32px;">
        <a href="invest/calculator.html" class="btn btn-secondary" style="background: white; color: #1744BE;">
          Calculate Your ROI
        </a>
      </div>
    </div>
  </section>

  <!-- Market Stats Section -->
  <section class="market-stats-section">
    <div class="container">
      <h2 class="section-title" data-i18n="market_title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î</h2>
      <p class="section-subtitle" data-i18n="market_subtitle">Latest market trends and statistics</p>

      <div id="market-stats-grid" class="stats-grid" aria-busy="true" aria-label="Loading market statistics">
        <!-- Skeleton placeholders -->
        <div class="stat-card skeleton-stat skeleton"></div>
        <div class="stat-card skeleton-stat skeleton"></div>
        <div class="stat-card skeleton-stat skeleton"></div>
      </div>

      <div style="text-align: center; margin-top: 32px;">
        <a href="invest/market-report.html" class="btn btn-primary" data-i18n="market_download_report">
          Download Full Report
        </a>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="testimonials-section">
    <div class="container">
      <h2 class="section-title" data-i18n="testimonial_title">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
      <p class="section-subtitle" data-i18n="testimonial_subtitle">Real reviews from real customers</p>

      <div class="testimonials-grid" id="testimonials-grid" aria-live="polite" aria-busy="true" aria-label="Loading testimonials">
        <!-- Skeleton placeholders -->
        <div class="testimonial-card skeleton-testimonial skeleton"></div>
        <div class="testimonial-card skeleton-testimonial skeleton"></div>
        <div class="testimonial-card skeleton-testimonial skeleton"></div>
      </div>
    </div>
  </section>

  <!-- Mobile Sticky Bar -->
  <div class="mobile-sticky-bar">
    <a href="https://line.me/ti/p/~@554dksqb">
      <i role="img" aria-label="LINE icon">üíö</i>
      <span data-i18n="mobile_line">LINE</span>
    </a>
    <a href="tel:+66634533526">
      <i role="img" aria-label="Phone icon">üìû</i>
      <span data-i18n="mobile_call">Call</span>
    </a>
    <a href="invest/calculator.html">
      <i role="img" aria-label="Calculator icon">üßÆ</i>
      <span data-i18n="mobile_calculate">Calculate</span>
    </a>
    <button class="save-btn" aria-label="Save property" onclick="alert(document.documentElement.lang === 'th' ? '‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ' : 'Save feature coming soon');">
      <i role="img" aria-label="Heart icon">‚ù§Ô∏è</i>
      <span data-i18n="mobile_save">Save</span>
    </button>
  </div>

  <!-- Footer -->
  <footer class="footer" id="contact">
    <div class="container">
      <div class="footer-content">
        <div>
          <h3>Asset Management Property</h3>
          <p>Professional property management in Pattaya</p>
          <p style="margin-top: 16px;">
            <strong>Office Hours:</strong><br>
            Mon - Sun: 9:00 AM - 6:00 PM
          </p>
        </div>

        <div>
          <h3>Contact Us</h3>
          <a href="tel:+66634533526"><span role="img" aria-label="Phone">üìû</span> +66 63-453-3526</a>
          <a href="mailto:info@amppattaya.com"><span role="img" aria-label="Email">üìß</span> info@amppattaya.com</a>
          <a href="https://line.me/ti/p/~@554dksqb"><span role="img" aria-label="LINE">üí¨</span> LINE: @554dksqb</a>
        </div>

        <div>
          <h3>Quick Links</h3>
          <a href="listing.html?intent=rent">Properties for Rent</a>
          <a href="listing.html?intent=sale">Properties for Sale</a>
          <a href="projects/index.html">Projects</a>
          <a href="invest/index.html">Investment Hub</a>
          <a href="about.html">About Us</a>
          <a href="contact.html">Contact Us</a>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2026 Asset Management Property. All rights reserved. | Demo Website</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="assets/js/mock-data.js"></script>
  <script src="assets/js/i18n.js"></script>
  <script src="assets/js/main.js"></script>

  <script>
    // Render featured properties
    function renderFeaturedProperties() {
      const container = document.getElementById('featured-properties');
      if (!container) return;

      const html = FEATURED_PROPERTIES.map(property => {
        const currentLang = document.documentElement.lang || 'en';
        const title = currentLang === 'th' ? property.title_th : property.title_en;
        const priceLabel = property.intent === 'rent' ? '/month' : '';
        const bedsLabel = property.beds === 0 ? 'Studio' : `${property.beds} ${property.beds === 1 ? 'Bed' : 'Beds'}`;
        const bathsLabel = `${property.baths} ${property.baths === 1 ? 'Bath' : 'Baths'}`;

        const badges = property.badges.map(badge => {
          const badgeClass = badge === 'Featured' ? 'badge-featured' :
            badge === 'Available Now' ? 'badge-available' : 'badge-updated';
          const badgeI18n = badge === 'Featured' ? 'prop_featured' :
            badge === 'Available Now' ? 'prop_available' : '';
          return `<span class="badge ${badgeClass}" ${badgeI18n ? `data-i18n="${badgeI18n}"` : ''}>${badge}</span>`;
        }).join('');

        return `
          <div class="property-card">
            <div class="card-image">
              <img src="${property.image}" alt="${title}" loading="lazy">
              ${badges ? `<div class="card-badges">${badges}</div>` : ''}
            </div>
            <div class="card-content">
              <div class="card-price">‡∏ø${property.price.toLocaleString()}<span data-i18n="prop_per_month">${priceLabel}</span></div>
              <h3 class="card-title">${title}</h3>
              <div class="card-facts">
                ${property.beds !== null ? `<span><span role="img" aria-label="Beds">üõèÔ∏è</span> <span data-i18n="prop_beds">${bedsLabel}</span></span>` : ''}
                ${property.baths !== null ? `<span><span role="img" aria-label="Bathrooms">üöø</span> <span data-i18n="prop_baths">${bathsLabel}</span></span>` : ''}
                <span><span role="img" aria-label="Area">üìê</span> ${property.sqm} <span data-i18n="prop_sqm">m¬≤</span></span>
              </div>
              <div class="card-location"><span role="img" aria-label="Location">üìç</span> ${property.area}</div>
              <div class="card-actions">
                <a href="detail.html?id=${property.id}" class="btn btn-primary btn-sm" data-i18n="prop_view_detail">View Details</a>
              </div>
            </div>
          </div>
        `;
      }).join('');

      container.innerHTML = html;
      // Remove loading state
      container.removeAttribute('aria-busy');
    }

    // Render popular areas
    function renderPopularAreas() {
      const container = document.getElementById('popular-areas');
      if (!container) return;

      const html = POPULAR_AREAS.map(area => {
        const currentLang = document.documentElement.lang || 'en';
        const name = currentLang === 'th' ? area.name_th : area.name;

        return `
          <div class="area-card" data-area="${area.name}">
            <img src="${area.image}" alt="${name}" loading="lazy">
            <div class="area-card-overlay">
              <h3 class="area-card-title">${name}</h3>
            </div>
          </div>
        `;
      }).join('');

      container.innerHTML = html;
      // Remove loading state
      container.removeAttribute('aria-busy');
    }

    // Initialize
    renderFeaturedProperties();
    renderPopularAreas();

    // Render Market Stats
    function renderMarketStats() {
      const container = document.getElementById('market-stats-grid');
      if (!container || typeof window.AMP === 'undefined' || !window.AMP.marketStats) return;

      const stats = window.AMP.marketStats;

      // Validate stats structure before proceeding
      if (!stats || typeof stats !== 'object') {
        console.error('AMP Market Stats: stats object is missing or invalid', stats);
        return;
      }

      if (!Array.isArray(stats.avg_price_by_type) || !Array.isArray(stats.hot_areas)) {
        console.error('AMP Market Stats: avg_price_by_type or hot_areas is not an array', {
          avg_price_by_type: stats.avg_price_by_type,
          hot_areas: stats.hot_areas
        });
        return;
      }

      if (!stats.rental_yields || typeof stats.rental_yields !== 'object') {
        console.error('AMP Market Stats: rental_yields is missing or not an object', stats.rental_yields);
        return;
      }
      const currentLang = document.documentElement.lang || 'en';

      // Helper function to get translation
      const translate = (key) => {
        if (typeof t === 'function') {
          return t(key);
        }
        return key;
      };

      // Helper function to format number with commas
      const formatNumber = (num) => {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      };

      // Clear existing content
      container.innerHTML = '';

      // 1. Average Price by Type Card
      const avgPriceCard = document.createElement('div');
      avgPriceCard.className = 'stat-card';

      const avgPriceTitle = document.createElement('h3');
      avgPriceTitle.textContent = translate('market_avg_price_by_type');
      avgPriceCard.appendChild(avgPriceTitle);

      stats.avg_price_by_type.forEach(item => {
        const typeLabel = currentLang === 'th' ? item.type_th : item.type.charAt(0).toUpperCase() + item.type.slice(1);
        
        const statItem = document.createElement('div');
        statItem.className = 'stat-item';

        const label = document.createElement('span');
        label.className = 'stat-label';
        label.textContent = typeLabel;

        const value = document.createElement('span');
        value.className = 'stat-value';
        
        // Handle positive/negative changes
        const changeSign = item.yoy_change >= 0 ? '+' : '';
        const changeClass = item.yoy_change >= 0 ? 'positive' : 'negative';
        
        // Set base text and append stat-change span without using innerHTML
        value.textContent = `‡∏ø${formatNumber(item.avg_price_sqm)}/${translate('market_price_per_sqm')} `;
        const changeSpan = document.createElement('span');
        changeSpan.className = `stat-change ${changeClass}`;
        changeSpan.textContent = `${changeSign}${item.yoy_change}%`;
        value.appendChild(changeSpan);

        statItem.appendChild(label);
        statItem.appendChild(value);
        avgPriceCard.appendChild(statItem);
      });

      container.appendChild(avgPriceCard);

      // 2. Hot Areas Card
      const hotAreasCard = document.createElement('div');
      hotAreasCard.className = 'stat-card';

      const hotAreasTitle = document.createElement('h3');
      hotAreasTitle.textContent = translate('market_hot_areas');
      hotAreasCard.appendChild(hotAreasTitle);

      stats.hot_areas.forEach(area => {
        const areaLabel = currentLang === 'th' ? area.area_th : area.area;
        
        const statItem = document.createElement('div');
        statItem.className = 'stat-item';

        const label = document.createElement('span');
        label.className = 'stat-label';
        label.textContent = areaLabel;

        const value = document.createElement('span');
        value.className = 'stat-value';
        
        // Handle positive/negative growth
        const growthSign = area.growth >= 0 ? '+' : '';
        const growthClass = area.growth >= 0 ? 'positive' : 'negative';
        
        const growthSpan = document.createElement('span');
        growthSpan.className = 'stat-change ' + growthClass;
        growthSpan.textContent = growthSign + area.growth + '%';
        value.appendChild(growthSpan);

        statItem.appendChild(label);
        statItem.appendChild(value);
        hotAreasCard.appendChild(statItem);
      });

      container.appendChild(hotAreasCard);

      // 3. Rental Yield Card
      const rentalYieldCard = document.createElement('div');
      rentalYieldCard.className = 'stat-card';

      const rentalYieldTitle = document.createElement('h3');
      rentalYieldTitle.textContent = translate('market_rental_yield');
      rentalYieldCard.appendChild(rentalYieldTitle);

      // Create a map for property type labels from avg_price_by_type
      const typeLabelMap = {};
      stats.avg_price_by_type.forEach(item => {
        typeLabelMap[item.type] = currentLang === 'th' ? item.type_th : item.type.charAt(0).toUpperCase() + item.type.slice(1);
      });

      // Display Net yields for each property type, derived from avg_price_by_type
      stats.avg_price_by_type.map(item => item.type).forEach(type => {
        const typeLabel = typeLabelMap[type] || type;
        const yields = stats.rental_yields[type];
        
        const statItem = document.createElement('div');
        statItem.className = 'stat-item';

        const label = document.createElement('span');
        label.className = 'stat-label';
        label.textContent = `${typeLabel} (${translate('market_net')})`;

        const value = document.createElement('span');
        value.className = 'stat-value';
        value.textContent = `${yields.net}%`;

        statItem.appendChild(label);
        statItem.appendChild(value);
        rentalYieldCard.appendChild(statItem);
      });

      container.appendChild(rentalYieldCard);
      
      // Remove loading state
      container.removeAttribute('aria-busy');
    }

    // Render testimonials
    function renderTestimonials() {
      const container = document.getElementById('testimonials-grid');
      if (!container || typeof window.AMP === 'undefined' || !window.AMP.testimonials || !Array.isArray(window.AMP.testimonials)) return;

      const testimonials = window.AMP.testimonials.slice(0, 6); // Show first 6
      const currentLang = document.documentElement.lang || 'en';

      // Clear existing content
      container.innerHTML = '';

      testimonials.forEach(testimonial => {
        const comment = testimonial.comment && testimonial.comment[currentLang] ? testimonial.comment[currentLang] : '';
        const stars = '‚≠ê'.repeat(testimonial.rating || 0);

        const card = document.createElement('div');
        card.className = 'testimonial-card';

        const header = document.createElement('div');
        header.className = 'testimonial-header';

        const photo = document.createElement('img');
        photo.className = 'testimonial-photo';
        photo.src = testimonial.photo || '';
        photo.alt = testimonial.name || '';
        photo.loading = 'lazy';

        const info = document.createElement('div');
        info.className = 'testimonial-info';

        const nameEl = document.createElement('div');
        nameEl.className = 'testimonial-name';
        nameEl.textContent = testimonial.name || '';

        const metaEl = document.createElement('div');
        metaEl.className = 'testimonial-meta';
        metaEl.textContent = (testimonial.nationality || '') + (testimonial.nationality && testimonial.property_type ? ' ‚Ä¢ ' : '') + (testimonial.property_type || '');

        info.appendChild(nameEl);
        info.appendChild(metaEl);
        header.appendChild(photo);
        header.appendChild(info);

        const ratingEl = document.createElement('div');
        ratingEl.className = 'testimonial-rating';
        ratingEl.setAttribute('role', 'img');
        ratingEl.setAttribute('aria-label', `${testimonial.rating || 0} out of 5 stars`);
        ratingEl.textContent = stars;

        const commentEl = document.createElement('div');
        commentEl.className = 'testimonial-comment';
        commentEl.textContent = comment;

        card.appendChild(header);
        card.appendChild(ratingEl);
        card.appendChild(commentEl);
        container.appendChild(card);
      });
      
      // Remove loading state
      container.removeAttribute('aria-busy');
    }

    // Call render functions
    renderMarketStats();
    renderTestimonials();

    // Re-render on language change
    document.addEventListener('languageChanged', function() {
      renderMarketStats();
      renderTestimonials();
    });
  </script>

  <script>
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  </script>
</body>

</html>